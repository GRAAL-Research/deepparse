<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CLI &mdash; deepparse 0.7.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parse Addresses" href="examples/parse_addresses.html" />
    <link rel="prev" title="Comparer" href="comparer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/deepparse.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.7.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parser.html">Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataset_container.html">Dataset Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparer.html">Comparer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CLI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parse">Parse</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dataset-format">Dataset Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exporting-format">Exporting Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/parse_addresses.html">Parse Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/parse_addresses_with_cli.html">Parse Addresses Using Our CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrained_model_parsing.html">Use a Retrained Model to Parse Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/fine_tuning.html">Retrain a Pretrained Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_attention_model.html">Retrain an attention mechanism model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_with_new_prediction_tags.html">Retrain With New Prediction Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_with_new_seq2seq_params.html">Retrain With New Seq2Seq Parameters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">deepparse</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>CLI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cli.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cli">
<h1>CLI<a class="headerlink" href="#cli" title="Permalink to this headline"></a></h1>
<p>You cas use our cli to parsed addresses directly from the command line or download a pre-trained model.</p>
<section id="parse">
<h2>Parse<a class="headerlink" href="#parse" title="Permalink to this headline"></a></h2>
<p>The parsing of the addresses to parse <code class="docutils literal notranslate"><span class="pre">dataset_path</span></code> is done using the selected <code class="docutils literal notranslate"><span class="pre">parsing_model</span></code>.
The exported parsed addresses are to be exported in the same directory as the addresses to parse but
given the <code class="docutils literal notranslate"><span class="pre">export_file_name</span></code> using the encoding format of the address dataset file. For example,
if the dataset is in a CSV format, the output file format will be a CSV. Moreover, by default,
we log some information (<code class="docutils literal notranslate"><span class="pre">--log</span></code>) such as the parser model name, the parsed dataset path
and the number of parsed addresses. Here is the list of the arguments and their descriptions. One can use
the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parsing_model</span></code>: The parsing module to use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_path</span></code>: The path to the dataset file in a pickle (.p or .pickle), CSV format or JSON format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_file_name</span></code>: The filename to use to export the parsed addresses. We will infer the file format base on the file extension. That is, if the file is a pickle (.p or .pickle), we will export it into a pickle file. The supported format are Pickle, CSV and JSON. The file will be exported in the same repositories as the dataset_path. See the doc for more details on the format exporting.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--device</span></code>: The device to use. It can be ‘cpu’ or a GPU device index such as ‘0’ or ‘1’. By default ‘0’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--path_to_retrained_model</span></code>: A path to a retrained model to use for parsing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_name</span></code>: The column name to extract address in the CSV. Need to be specified if the provided dataset_path leads to a CSV file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_separator</span></code>: The column separator for the dataset container will only be used if the dataset is a CSV one. By default ‘t’.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--log</span></code>: Either or not to log the parsing process into a <cite>.log</cite> file exported at the same place as the parsed data using the same name as the export file. The bool value can be (not case sensitive) ‘true/false’, ‘t/f’, ‘yes/no’, ‘y/n’ or ‘0/1’.</p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.parse.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.parse.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/parse.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.parse.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to rapidly parse an addresses dataset and output it in another file.</p>
<p>Examples of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset_path.csv parsed_address.pickle
</pre></div>
</div>
<p>Using a gpu device</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset_path.csv parsed_address.pickle --device <span class="m">0</span>
</pre></div>
</div>
<p>Using a CSV dataset</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset.csv parsed_address.pickle --path_to_retrained_model ./path
</pre></div>
</div>
</dd></dl>

<section id="dataset-format">
<h3>Dataset Format<a class="headerlink" href="#dataset-format" title="Permalink to this headline"></a></h3>
<p>For the dataset format see our <a class="reference internal" href="dataset_container.html#deepparse.dataset_container.DatasetContainer" title="deepparse.dataset_container.DatasetContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetContainer</span></code></a>.</p>
</section>
<section id="exporting-format">
<h3>Exporting Format<a class="headerlink" href="#exporting-format" title="Permalink to this headline"></a></h3>
<p>We support three types of export format: CSV, Pickle and JSON.</p>
<p>The first export uses the following pattern column pattern:
<code class="docutils literal notranslate"><span class="pre">&quot;Address&quot;,</span> <span class="pre">&quot;First</span> <span class="pre">address</span> <span class="pre">components</span> <span class="pre">class&quot;,</span> <span class="pre">&quot;Second</span> <span class="pre">class&quot;,</span> <span class="pre">...</span></code>.
Which mean the address <code class="docutils literal notranslate"><span class="pre">305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2</span></code> will output the table bellow
using our default tags:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>StreetNumber</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>StreetName</p></th>
<th class="head"><p>Orientation</p></th>
<th class="head"><p>Municipality</p></th>
<th class="head"><p>Province</p></th>
<th class="head"><p>Postal Code</p></th>
<th class="head"><p>GeneralDelivery</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>305 rue des Lilas 0 app 2</p></td>
<td><p>305</p></td>
<td><p>app 2</p></td>
<td><p>rue des lilas</p></td>
<td><p>o</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
<p>The second export uses a similar approach but using tuples and list. Using the same example will return the following
tuple <code class="docutils literal notranslate"><span class="pre">(&quot;305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2&quot;,</span> <span class="pre">[(&quot;305&quot;,</span> <span class="pre">&quot;StreetNumber&quot;),</span> <span class="pre">(&quot;rue</span> <span class="pre">des</span> <span class="pre">lilas&quot;,</span> <span class="pre">&quot;StreetName&quot;),</span> <span class="pre">...])</span></code>.</p>
<p>The third export uses a similar approach as the CSV format but instead use a dictionary-like formatting. Using the
same example will return the following dict <code class="docutils literal notranslate"><span class="pre">{&quot;Address&quot;:</span> <span class="pre">&quot;305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2&quot;,</span> <span class="pre">&quot;StreetNumber&quot;:</span> <span class="pre">&quot;305&quot;,</span> <span class="pre">...}</span></code>.</p>
</section>
</section>
<section id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline"></a></h2>
<p>Command to pre-download model weights and requirements. Here is the argument, its description and possible choices,
one can use the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model_type</span></code>: The parsing module to download. The possible choice are <code class="docutils literal notranslate"><span class="pre">fasttext</span></code>, <code class="docutils literal notranslate"><span class="pre">fasttext-attention</span></code>,</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">fasttext-light</span></code>, <code class="docutils literal notranslate"><span class="pre">bpemb</span></code> and <code class="docutils literal notranslate"><span class="pre">bpemb-attention</span></code>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.download.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.download.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/download.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.download.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to manually download all the dependencies for a pre-trained model.</p>
<p>Example of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>download_model fasttext
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="comparer.html" class="btn btn-neutral float-left" title="Comparer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples/parse_addresses.html" class="btn btn-neutral float-right" title="Parse Addresses" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Marouane Yassine &amp; David Beauchemin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>