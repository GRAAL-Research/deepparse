<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CLI &mdash; deepparse 0.8 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parse Addresses" href="examples/parse_addresses.html" />
    <link rel="prev" title="Comparer" href="comparer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/deepparse.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.8
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parser.html">Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataset_container.html">Dataset Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparer.html">Comparer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CLI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parse">Parse</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dataset-format">Dataset Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exporting-format">Exporting Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#retrain">Retrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test">Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download">Download</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/parse_addresses.html">Parse Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/parse_addresses_with_cli.html">Parse Addresses Using Our CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrained_model_parsing.html">Use a Retrained Model to Parse Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/fine_tuning.html">Retrain a Pretrained Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/fine_tuning_with_csv_dataset.html">Retrain a Pretrained Model Using a CSV Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_attention_model.html">Retrain an attention mechanism model</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_with_new_prediction_tags.html">Retrain With New Prediction Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/retrain_with_new_seq2seq_params.html">Retrain With New Seq2Seq Parameters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">deepparse</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>CLI</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cli.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cli">
<h1>CLI<a class="headerlink" href="#cli" title="Permalink to this heading"></a></h1>
<p>You can use our CLI to parse addresses directly from the command line, retrain a parsing model or download a
pretrained model.</p>
<section id="parse">
<h2>Parse<a class="headerlink" href="#parse" title="Permalink to this heading"></a></h2>
<p>The parsing of the addresses to parse <code class="docutils literal notranslate"><span class="pre">dataset_path</span></code> is done using the selected <code class="docutils literal notranslate"><span class="pre">parsing_model</span></code>.
The exported parsed addresses are to be exported in the same directory as the addresses to parse but
given the <code class="docutils literal notranslate"><span class="pre">export_file_name</span></code> using the encoding format of the address dataset file. For example,
if the dataset is in a CSV format, the output file format will be a CSV. Moreover, by default,
we log some information (<code class="docutils literal notranslate"><span class="pre">--log</span></code>) such as the parser model name, the parsed dataset path
and the number of parsed addresses. Here is the list of the arguments, their descriptions and default values.
One can use the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parsing_model</span></code>: The parsing module to use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_path</span></code>: The path to the dataset file in a pickle (<code class="docutils literal notranslate"><span class="pre">.p</span></code>, <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.pckl</span></code>) or CSV format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_file_name</span></code>: The filename to use to export the parsed addresses. We will infer the file format base on the file extension. That is, if the file is a pickle (<code class="docutils literal notranslate"><span class="pre">.p</span></code> or <code class="docutils literal notranslate"><span class="pre">.pickle</span></code>), we will export it into a pickle file. The supported formats are Pickle, CSV and JSON. The file will be exported in the same repositories as the dataset_path. See the doc for more details on the format exporting.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--device</span></code>: The device to use. It can be ‘cpu’ or a GPU device index such as <code class="docutils literal notranslate"><span class="pre">'0'</span></code> or <code class="docutils literal notranslate"><span class="pre">'1'</span></code>. By default, <code class="docutils literal notranslate"><span class="pre">'0'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--batch_size</span></code>: The batch size to use to process the dataset. By default, <code class="docutils literal notranslate"><span class="pre">32</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--path_to_retrained_model</span></code>: A path to a retrained model to use for parsing. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_name</span></code>: The column name to extract address in the CSV. Need to be specified if the provided <code class="docutils literal notranslate"><span class="pre">dataset_path</span></code> leads to a CSV file. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_separator</span></code>: The column separator for the dataset container will only be used if the dataset is a CSV one. By default, <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--log</span></code>: Either or not to log the parsing process into a <code class="docutils literal notranslate"><span class="pre">.log</span></code> file exported at the same place as the parsed data using the same name as the export file. The bool value can be (not case sensitive) <code class="docutils literal notranslate"><span class="pre">'true/false'</span></code>, <code class="docutils literal notranslate"><span class="pre">'t/f'</span></code>, <code class="docutils literal notranslate"><span class="pre">'yes/no'</span></code>, <code class="docutils literal notranslate"><span class="pre">'y/n'</span></code> or <code class="docutils literal notranslate"><span class="pre">'0/1'</span></code>. By default, <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cache_dir</span></code>: To change the default cache directory (default to <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g. default path).</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.parse.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.parse.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/parse.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.parse.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to rapidly parse an addresses dataset and output it in another file.</p>
<p>Examples of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset_path.csv parsed_address.pickle
</pre></div>
</div>
<p>Using a gpu device</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset_path.csv parsed_address.p --device <span class="m">0</span>
</pre></div>
</div>
<p>Using a CSV dataset</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>parse fasttext ./dataset.csv parsed_address.pckl --path_to_retrained_model ./path
</pre></div>
</div>
</dd></dl>

<section id="dataset-format">
<h3>Dataset Format<a class="headerlink" href="#dataset-format" title="Permalink to this heading"></a></h3>
<p>For the dataset format see our <a class="reference internal" href="dataset_container.html#deepparse.dataset_container.DatasetContainer" title="deepparse.dataset_container.DatasetContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetContainer</span></code></a>.</p>
</section>
<section id="exporting-format">
<h3>Exporting Format<a class="headerlink" href="#exporting-format" title="Permalink to this heading"></a></h3>
<p>We support three types of export formats: CSV, Pickle and JSON.</p>
<p>The first export uses the following pattern column pattern:
<code class="docutils literal notranslate"><span class="pre">&quot;Address&quot;,</span> <span class="pre">&quot;First</span> <span class="pre">address</span> <span class="pre">components</span> <span class="pre">class&quot;,</span> <span class="pre">&quot;Second</span> <span class="pre">class&quot;,</span> <span class="pre">...</span></code>.
Which means the address <code class="docutils literal notranslate"><span class="pre">305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2</span></code> will output the table bellow
using our default tags:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>StreetNumber</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>StreetName</p></th>
<th class="head"><p>Orientation</p></th>
<th class="head"><p>Municipality</p></th>
<th class="head"><p>Province</p></th>
<th class="head"><p>Postal Code</p></th>
<th class="head"><p>GeneralDelivery</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>305 rue des Lilas 0 app 2</p></td>
<td><p>305</p></td>
<td><p>app 2</p></td>
<td><p>rue des lilas</p></td>
<td><p>o</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
</tbody>
</table>
<p>The second export uses a similar approach but using tuples and list. Using the same example will return the following
tuple <code class="docutils literal notranslate"><span class="pre">(&quot;305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2&quot;,</span> <span class="pre">[(&quot;305&quot;,</span> <span class="pre">&quot;StreetNumber&quot;),</span> <span class="pre">(&quot;rue</span> <span class="pre">des</span> <span class="pre">lilas&quot;,</span> <span class="pre">&quot;StreetName&quot;),</span> <span class="pre">...])</span></code>.</p>
<p>The third export uses a similar approach to the CSV format but uses dictionary-like formatting. Using the
same example will return the following dict <code class="docutils literal notranslate"><span class="pre">{&quot;Address&quot;:</span> <span class="pre">&quot;305</span> <span class="pre">rue</span> <span class="pre">des</span> <span class="pre">Lilas</span> <span class="pre">0</span> <span class="pre">app</span> <span class="pre">2&quot;,</span> <span class="pre">&quot;StreetNumber&quot;:</span> <span class="pre">&quot;305&quot;,</span> <span class="pre">...}</span></code>.</p>
</section>
</section>
<section id="retrain">
<h2>Retrain<a class="headerlink" href="#retrain" title="Permalink to this heading"></a></h2>
<p>This command allows a user to retrain the <code class="docutils literal notranslate"><span class="pre">base_parsing_model</span></code> on the <code class="docutils literal notranslate"><span class="pre">train_dataset_path</span></code> dataset.
For the training, the CSV or Pickle dataset is loader in a specific dataloader (see
<a class="reference internal" href="dataset_container.html#deepparse.dataset_container.DatasetContainer" title="deepparse.dataset_container.DatasetContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetContainer</span></code></a> for more details). We use Poutyne’s automatic logging
functionalities during training. Thus, it creates an epoch checkpoint and outputs the epoch metrics in a TSV file.
Moreover, we save the best epoch model under the retrain model name (either the default one or a given name using
the <code class="docutils literal notranslate"><span class="pre">name_of_the_retrain_parser</span></code> argument). Here is the list of the arguments, their descriptions and default values.
One can use the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">base_parsing_model</span></code>: The parsing module to retrain.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train_dataset_path</span></code>: The path to the dataset file in a pickle (<code class="docutils literal notranslate"><span class="pre">.p</span></code>, <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.pckl</span></code>) or CSV format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--train_ratio</span></code>: The ratio to use of the dataset for the training. The rest of the data is used for the validation (e.g. a training ratio of 0.8 mean an 80-20 train-valid split) (default is <code class="docutils literal notranslate"><span class="pre">0.8</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--batch_size</span></code>: The size of the batch (default is <code class="docutils literal notranslate"><span class="pre">32</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--epochs</span></code>: The number of training epochs (default is <code class="docutils literal notranslate"><span class="pre">5</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--num_workers</span></code>: The number of workers to use for the data loader (default is <code class="docutils literal notranslate"><span class="pre">1</span></code> worker).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--learning_rate</span></code>: The learning rate (LR) to use for training (default <code class="docutils literal notranslate"><span class="pre">0.01</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--seed</span></code>: The seed to use (default <code class="docutils literal notranslate"><span class="pre">42</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--logging_path</span></code>: The logging path for the checkpoints and the retrained model. Note that training creates checkpoints, and we use the Poutyne library that uses the best epoch model and reloads the state if any checkpoints are already there. Thus, an error will be raised if you change the model type. For example, you retrain a FastText model and then retrain a BPEmb in the same logging path directory. By default, the path is <code class="docutils literal notranslate"><span class="pre">'./checkpoints'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disable_tensorboard</span></code>: To disable Poutyne automatic Tensorboard monitoring. By default, we disable them (<code class="docutils literal notranslate"><span class="pre">True</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--layers_to_freeze</span></code>: Name of the portion of the seq2seq to freeze layers, thus reducing the number of parameters to learn. Default to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--name_of_the_retrain_parser</span></code>: Name to give to the retrained parser that will be used when reloaded as the printed name, and to the saving file name. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, thus, the default name. See the complete parser retrain method for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--device</span></code>: The device to use. It can be <code class="docutils literal notranslate"><span class="pre">'cpu'</span></code> or a GPU device index such as <code class="docutils literal notranslate"><span class="pre">'0'</span></code> or <code class="docutils literal notranslate"><span class="pre">'1'</span></code>. By default <code class="docutils literal notranslate"><span class="pre">'0'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_names</span></code>: The column names to extract address in the CSV. Need to be specified if the provided dataset_path leads to a CSV file. Column names have to be separated by whitespace. For example, <code class="docutils literal notranslate"><span class="pre">--csv_column_names</span> <span class="pre">column1</span> <span class="pre">column2</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_separator</span></code>: The column separator for the dataset container will only be used if the dataset is a CSV one. By default, <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cache_dir</span></code>: To change the default cache directory (default to <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g. default path).</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.retrain.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.retrain.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/retrain.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.retrain.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to rapidly retrain an addresses parser and saves it. One can retrain a base pretrained model
using most of the arguments as the <code class="xref py py-meth docutils literal notranslate"><span class="pre">retrain()</span></code> method. By default, all the parameters have
the same default value as the <code class="xref py py-meth docutils literal notranslate"><span class="pre">retrain()</span></code> method. The supported parameters are the following:</p>
<ul class="simple">
<li><p><cite>train_ratio</cite>,</p></li>
<li><p><cite>batch_size</cite>,</p></li>
<li><p><cite>epochs</cite>,</p></li>
<li><p><cite>num_workers</cite>,</p></li>
<li><p><cite>learning_rate</cite>,</p></li>
<li><p><cite>seed</cite>,</p></li>
<li><p><cite>logging_path</cite>,</p></li>
<li><p><cite>disable_tensorboard</cite>,</p></li>
<li><p><cite>layers_to_freeze</cite>, and</p></li>
<li><p><cite>name_of_the_retrain_parser</cite>.</p></li>
</ul>
<p>Examples of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>retrain fasttext ./train_dataset_path.csv
</pre></div>
</div>
<p>Using a gpu device</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>retrain bpemb ./train_dataset_path.csv --device <span class="m">0</span>
</pre></div>
</div>
<p>Modifying training parameters</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>retrain bpemb ./train_dataset_path.csv --device <span class="m">0</span> --batch_size <span class="m">128</span> --learning_rate <span class="m">0</span>.001
</pre></div>
</div>
</dd></dl>

<p>We do not handle the <code class="docutils literal notranslate"><span class="pre">seq2seq_params</span></code> and <code class="docutils literal notranslate"><span class="pre">prediction_tags</span></code> fine-tuning argument for now.</p>
</section>
<section id="test">
<h2>Test<a class="headerlink" href="#test" title="Permalink to this heading"></a></h2>
<p>This command allows a user to test the <code class="docutils literal notranslate"><span class="pre">base_parsing_model</span></code> (or the retrained one using the
<code class="docutils literal notranslate"><span class="pre">--path_to_retrained_model</span></code>) on the <code class="docutils literal notranslate"><span class="pre">train_dataset_path</span></code> dataset.
For the testing, the CSV or Pickle dataset is loader in a specific dataloader (see
<a class="reference internal" href="dataset_container.html#deepparse.dataset_container.DatasetContainer" title="deepparse.dataset_container.DatasetContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatasetContainer</span></code></a> for more details). Moreover, by default,
we log some information (<code class="docutils literal notranslate"><span class="pre">--log</span></code>) such as the tested address parser model name and the parsed dataset path. Plus,
we also log the testing results in a TSV file. The two files are exported at the same path as the testing dataset.
Here is the list of the arguments, their descriptions and default values.
One can use the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">base_parsing_model</span></code>: The parsing module to test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_dataset_path</span></code>: The path to the dataset file in a pickle (<code class="docutils literal notranslate"><span class="pre">.p</span></code>, <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.pckl</span></code>) or CSV format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--device</span></code>: The device to use. It can be ‘cpu’ or a GPU device index such as <code class="docutils literal notranslate"><span class="pre">'0'</span></code> or <code class="docutils literal notranslate"><span class="pre">'1'</span></code>. By default, <code class="docutils literal notranslate"><span class="pre">'0'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--path_to_retrained_model</span></code>: A path to a retrained model to use test (need to be the same model type as <code class="docutils literal notranslate"><span class="pre">base_parsing_model</span></code>). By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--batch_size</span></code>: The batch size to use to process the dataset. By default, <code class="docutils literal notranslate"><span class="pre">32</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--num_workers</span></code>: The number of workers to use for the data loader (default is <code class="docutils literal notranslate"><span class="pre">1</span></code> worker).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--seed</span></code>: The seed to use to make the sampling deterministic (default <code class="docutils literal notranslate"><span class="pre">42</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_name</span></code>: The column name to extract address in the CSV. Need to be specified if the provided <code class="docutils literal notranslate"><span class="pre">dataset_path</span></code> leads to a CSV file. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--csv_column_separator</span></code>: The column separator for the dataset container will only be used if the dataset is a CSV one. By default, <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--log</span></code>: Either or not to log the parsing process into a <code class="docutils literal notranslate"><span class="pre">.log</span></code> file exported at the same place as the parsed data using the same name as the export file. The bool value can be (not case sensitive) <code class="docutils literal notranslate"><span class="pre">'true/false'</span></code>, <code class="docutils literal notranslate"><span class="pre">'t/f'</span></code>, <code class="docutils literal notranslate"><span class="pre">'yes/no'</span></code>, <code class="docutils literal notranslate"><span class="pre">'y/n'</span></code> or <code class="docutils literal notranslate"><span class="pre">'0/1'</span></code>. By default, <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cache_dir</span></code>: To change the default cache directory (default to <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g. default path).</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.test.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.test.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/test.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.test.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to rapidly test an address parser on test data using the same argument as the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">test()</span></code> method (with the same default values) except for the callbacks.
The results will be logged in a CSV file next to the test dataset.</p>
<p>Examples of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">test</span> fasttext ./test_dataset_path.csv
</pre></div>
</div>
<p>Modifying testing parameters</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">test</span> bpemb ./test_dataset_path.csv --batch_size <span class="m">128</span> --logging_path <span class="s2">&quot;./logging_test&quot;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this heading"></a></h2>
<p>Command to pre-download model weights and requirements. Here is the list of arguments. One can use the command <code class="docutils literal notranslate"><span class="pre">parse</span> <span class="pre">--help</span></code> to output the same description in your command line.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">model_type</span></code>: The parsing module to download. The possible choice are <code class="docutils literal notranslate"><span class="pre">'fasttext'</span></code>, <code class="docutils literal notranslate"><span class="pre">'fasttext-attention'</span></code>, <code class="docutils literal notranslate"><span class="pre">'fasttext-light'</span></code>, <code class="docutils literal notranslate"><span class="pre">'bpemb'</span></code> and <code class="docutils literal notranslate"><span class="pre">'bpemb-attention'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--saving_cache_dir</span></code>: To change the default saving cache directory (default to <code class="docutils literal notranslate"><span class="pre">None</span></code>, e.g. default path).</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="deepparse.cli.download.main">
<span class="sig-prename descclassname"><span class="pre">deepparse.cli.download.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/deepparse/cli/download.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#deepparse.cli.download.main" title="Permalink to this definition"></a></dt>
<dd><p>CLI function to manually download all the dependencies for a pretrained model.</p>
<p>Example of usage:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>download_model fasttext

download_model fasttext a_cache_dir_path
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="comparer.html" class="btn btn-neutral float-left" title="Comparer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples/parse_addresses.html" class="btn btn-neutral float-right" title="Parse Addresses" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Marouane Yassine &amp; David Beauchemin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>